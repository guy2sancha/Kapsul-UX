<!-- ================== TICKER ================== -->
<div id="kapsul-ticker-bar">
  <div class="ticker-inner">
    <div class="curator-buttons">
      <a href="#newsletter" class="outline-btn">Subscribe to Newsletter</a>
    </div>
  </div>
</div>

<!-- ================== HEADER ================== -->
<div id="customHeader">
  <div class="logo-container">
    <a href="/"
      ><img
        src="https://open-circle.b-cdn.net/Logo/Logo%20Noir%20512x512%20(3).svg"
        alt="Honmono"
    /></a>
  </div>

  <nav class="hm-nav" aria-label="Primary">
    <!-- INDEX (mega) -->
    <div class="hm-item hm-has-dd">
      <a class="hm-link" href="#" aria-haspopup="true" aria-expanded="false">
        Index <span class="hm-chevron" aria-hidden="true">▼</span>
      </a>

      <div class="hm-dd hm-mega" role="menu" aria-label="Index menu">
        <div class="hm-grid">
          <!-- Featured -->
          <div class="hm-feature">
            <a
              href="https://www.opencircle.jp/brand-details?recordId=recE3FdK8z0P4345Z"
              class="hm-feature-media"
              aria-label="Brand of the month"
            >
              <img
                src="https://open-circle.b-cdn.net/Brands/9Jour./3.webp"
                alt="Brand of the month preview"
                loading="lazy"
              />
            </a>

            <div class="hm-feature-meta">
              <span class="hm-badge">Brand of the month</span>
              <h4 class="hm-feature-title">9Jour</h4>
              <p class="hm-feature-sub">Denim · Kyoto, JP</p>
              <a
                class="hm-feature-cta"
                href="https://www.opencircle.jp/brand-details?recordId=recE3FdK8z0P4345Z"
                >View entry →</a
              >
            </div>
          </div>

          <!-- Categories -->
          <div class="hm-col">
            <div class="hm-head">Categories</div>
            <a class="hm-dd-link" href="/brands/fashion">Fashion</a>
            <a class="hm-dd-link" href="/brands/beauty-wellness">Beauty &amp; Wellbeing</a>
            <a class="hm-dd-link" href="/brands/jewelry">Jewelry</a>
            <a class="hm-dd-link" href="/brands/home-decor">Home &amp; Craft</a>

            <div class="hm-head hm-head-gap">Quick access</div>
            <a class="hm-dd-link hm-muted" href="/brands?sort=new">New entries</a>
            <a class="hm-dd-link hm-muted" href="/brands?sort=popular">Most liked</a>
            <a class="hm-dd-link hm-muted" href="/search">Search</a>
          </div>

          <!-- Collections -->
          <div class="hm-col">
            <div class="hm-head">Collections</div>
            <a class="hm-dd-link" href="/made-in-japan">Made in Japan</a>
            <a class="hm-dd-link" href="/denim">Denim</a>
            <a class="hm-dd-link" href="/sustainable">Durable</a>
            <a class="hm-dd-link" href="/women-owned">Women-founded</a>

            <div class="hm-head hm-head-gap">Perspective</div>
            <a class="hm-dd-link hm-muted" href="/field-notes">Field notes</a>
          </div>
        </div>
      </div>
    </div>

    <!-- Selections -->
    <div class="hm-item">
      <a class="hm-link" href="/selections">Selections</a>
    </div>

    <!-- About -->
    <div class="hm-item">
      <a class="hm-link" href="/stories">About</a>
    </div>

    <!-- PLUS (expands to the right) -->
    <div class="hm-item hm-plus" id="hmPlus">
      <button
        class="hm-link hm-plus-btn"
        type="button"
        aria-expanded="false"
        aria-controls="hmPlusPanel"
        title="More"
      >
        <span class="hm-plus-icon" aria-hidden="true">＋</span>
        <span class="hm-sr">More</span>
      </button>

      <div class="hm-plus-panel" id="hmPlusPanel" aria-label="More menu">
        <a class="hm-plus-link" href="/submit">Suggest a Brand</a>
        <a class="hm-plus-link" href="https://instagram.com/" target="_blank" rel="noopener">Instagram</a>
        <a class="hm-plus-link" href="/jp">日本語</a>
      </div>
    </div>
  </nav>
</div>

<!-- ================== STYLES ================== -->
<style>
  /* Baseline */
  a { color: #000; text-decoration: none; background: transparent; }
  .curator-buttons { display: flex; gap: 12px; }
  .outline-btn {
    border: 1px solid #fff;
    background: transparent;
    color: #fff;
    padding: 4px 10px;
    border-radius: 999px;
    font-size: 10px;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    text-decoration: none;
    transition: 0.2s;
  }
  .outline-btn:hover { background: rgba(255, 255, 255, 0.12); color: #fff; }
  .outline-btn:focus-visible { outline: 2px solid rgba(188, 1, 44, 0.9); outline-offset: 3px; }

  /* Ticker */
  :root { --ticker-h: 44px; }
  #kapsul-ticker-bar {
    background: #000;
    color: #fff;
    font-size: 12px;
    font-weight: 500;
    padding: 10px 20px;
    display: flex;
    justify-content: center;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 9999;
    min-height: var(--ticker-h);
  }
  .ticker-inner {
    display: flex;
    flex-direction: row-reverse;
    justify-content: space-between;
    align-items: center;
    width: 98%;
    white-space: nowrap;
    gap: 20px;
  }

  /* Header */
  #customHeader {
    position: fixed;
    top: calc(var(--ticker-h) + 8px);
    left: 0;
    right: 0;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 2.5%;
    border-bottom: 1px solid transparent;
    z-index: 1000;
    transition: 0.35s;
  }
  #customHeader.scrolled { background: #000; border-bottom: 1px solid #000; box-shadow: 0 2px 4px rgba(0,0,0,0.2); }

  .logo-container { flex: 1; display: flex; justify-content: right; }
  .logo-container img { height: 150px; }

  /* Nav */
  .hm-nav {
    display: flex;
    font-size: 16px;
    position: absolute;
    left: 64px;
    padding: 6px;
    border-radius: 999px;
    gap: 2px;
    background: rgba(22, 22, 22, 0.92);
    border: 1px solid rgba(255, 255, 255, 0.08);
    backdrop-filter: saturate(140%) blur(8px);
    align-items: center; /* important for the + extension */
  }

  .hm-item { position: relative; }
  .hm-link {
    color: #fffff0;
    font-weight: 500;
    padding: 10px 15px;
    display: flex;
    align-items: center;
    border-radius: 999px;
    white-space: nowrap;
    transition: color 0.18s, background 0.18s;
    letter-spacing: 0.01em;
  }
  .hm-link:hover { color: #BC012C; background: rgba(255, 255, 255, 0.06); }
  .hm-link:focus-visible { outline: 2px solid rgba(188,1,44,0.9); outline-offset: 3px; }

  .hm-chevron {
    display: inline-block;
    font-size: 10px;
    margin-left: 6px;
    transition: transform 0.2s, color 0.2s;
  }
  .hm-item:hover .hm-chevron,
  .hm-item:focus-within .hm-chevron {
    transform: rotate(180deg) translateY(1px);
    color: #BC012C;
  }

  /* Dropdown base */
  .hm-dd {
    opacity: 0;
    transform: translateY(10px);
    pointer-events: none;
    position: absolute;
    top: calc(100% + 12px);
    left: 0;
    background: rgba(255, 255, 255, 0.98);
    padding: 24px;
    border-radius: 14px;
    box-shadow: 0 18px 50px rgba(0,0,0,0.22);
    border: 1px solid rgba(0,0,0,0.08);
    z-index: 1000;
    min-width: 600px;
    color: #000;
    transition: opacity 0.18s ease, transform 0.18s ease;
  }
  .hm-item:hover > .hm-dd,
  .hm-item:focus-within > .hm-dd { opacity: 1; transform: translateY(0); pointer-events: auto; }

  .hm-mega { min-width: 1100px; }
  .hm-grid {
    display: grid;
    grid-template-columns: 1.05fr 0.95fr 0.95fr;
    gap: 56px;
    align-items: start;
  }

  /* Featured block */
  .hm-feature {
    overflow: hidden;
    border-radius: 16px;
    border: 1px solid rgba(0,0,0,0.08);
    background: #fafafa;
  }
  .hm-feature-media { aspect-ratio: 4/5; overflow: hidden; display: block; }
  .hm-feature-media img { width: 100%; height: 100%; object-fit: cover; display: block; transform: scale(1.001); }

  .hm-feature-meta { padding: 14px 14px 16px; color: #111; }
  .hm-badge {
    display: inline-block;
    background: #BC012C;
    color: #fff;
    font-size: 10px;
    letter-spacing: 0.10em;
    text-transform: uppercase;
    padding: 6px 10px;
    border-radius: 999px;
    margin-bottom: 10px;
  }
  .hm-feature-title { margin: 0 0 4px 0; font-weight: 900; font-size: 16px; }
  .hm-feature-sub { margin: 0 0 10px 0; font-size: 12px; color: #6b7280; }
  .hm-feature-cta {
    display: inline-block;
    font-size: 13px;
    font-weight: 700;
    color: #111;
    border-bottom: 1px solid rgba(0,0,0,0.2);
    padding-bottom: 2px;
    transition: color 0.15s, border-color 0.15s;
  }
  .hm-feature-cta:hover { color: #BC012C; border-color: rgba(188,1,44,0.5); }
  .hm-feature-cta:focus-visible { outline: 2px solid rgba(188,1,44,0.9); outline-offset: 3px; border-radius: 6px; }

  /* Columns */
  .hm-col { display: flex; flex-direction: column; gap: 10px; }
  .hm-head {
    font-weight: 900;
    text-transform: uppercase;
    letter-spacing: 0.10em;
    font-size: 11px;
    color: #0b0b0b;
    border-bottom: 1px solid rgba(0,0,0,0.08);
    padding-bottom: 10px;
    margin-bottom: 6px;
  }
  .hm-head-gap { margin-top: 14px; }

  .hm-dd-link {
    color: #111;
    font-size: 14px;
    padding: 6px 0;
    line-height: 1.2;
    transition: color 0.15s, transform 0.15s;
  }
  .hm-dd-link:hover { color: #BC012C; transform: translateX(2px); }
  .hm-dd-link:focus-visible { outline: 2px solid rgba(188,1,44,0.9); outline-offset: 3px; border-radius: 6px; }

  .hm-muted { color: #6b7280; }
  .hm-muted:hover { color: #111; }

  /* ===== PLUS EXTENSION (click to expand right) ===== */
  .hm-plus { display: flex; align-items: center; }
  .hm-plus-btn {
    background: transparent;
    border: 0;
    cursor: pointer;
    padding: 10px 12px; /* slightly tighter than links */
  }
  .hm-plus-icon { font-size: 16px; line-height: 1; transform: translateY(-1px); }

  /* panel that "extends to the right" */
  .hm-plus-panel {
    width: 0;
    overflow: hidden;
    display: flex;
    align-items: center;
    gap: 2px;
    margin-left: 2px;
    border-left: 1px solid rgba(255,255,255,0.08);
    padding-left: 2px;
    transition: width 0.22s ease;
  }

  /* expanded state */
  .hm-plus.is-open .hm-plus-panel { width: 340px; } /* adjust to taste */
  .hm-plus.is-open .hm-plus-btn { background: rgba(255,255,255,0.06); }

  .hm-plus-link {
    color: #fffff0;
    font-weight: 500;
    padding: 10px 12px;
    border-radius: 999px;
    white-space: nowrap;
    transition: color 0.18s, background 0.18s;
  }
  .hm-plus-link:hover { color: #BC012C; background: rgba(255,255,255,0.06); }
  .hm-plus-link:focus-visible { outline: 2px solid rgba(188,1,44,0.9); outline-offset: 3px; }

  /* accessible helper */
  .hm-sr {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0,0,0,0);
    white-space: nowrap;
    border: 0;
  }

  /* Responsive */
  @media (max-width: 1100px) {
    .hm-mega { min-width: min(92vw, 900px); }
    .hm-dd { max-width: 92vw; }
  }
  @media (max-width: 900px) {
    .hm-grid { grid-template-columns: 1fr; }
    .hm-mega { min-width: min(92vw, 520px); }
    .hm-plus.is-open .hm-plus-panel { width: 260px; }
  }

  @media (prefers-reduced-motion: reduce) {
    .hm-dd, .hm-chevron, .hm-dd-link, .hm-link, .outline-btn, .hm-plus-panel { transition: none !important; }
  }
</style>

<!-- ================== SCRIPT (required for + toggle + outside click) ================== -->
<script>
  (function () {
    var plus = document.getElementById("hmPlus");
    if (!plus) return;

    var btn = plus.querySelector(".hm-plus-btn");
    var panel = plus.querySelector(".hm-plus-panel");

    function closePlus() {
      plus.classList.remove("is-open");
      btn && btn.setAttribute("aria-expanded", "false");
    }

    function openPlus() {
      plus.classList.add("is-open");
      btn && btn.setAttribute("aria-expanded", "true");
    }

    function togglePlus(e) {
      e.preventDefault();
      e.stopPropagation();
      plus.classList.contains("is-open") ? closePlus() : openPlus();
    }

    btn && btn.addEventListener("click", togglePlus);

    // Close on outside click
    document.addEventListener("click", function (e) {
      if (!plus.classList.contains("is-open")) return;
      if (plus.contains(e.target)) return;
      closePlus();
    });

    // Close on Escape
    document.addEventListener("keydown", function (e) {
      if (e.key === "Escape") closePlus();
    });

    // Prevent clicks inside panel from closing (since document handler checks contains, this is mostly redundant)
    panel && panel.addEventListener("click", function (e) { e.stopPropagation(); });
  })();
</script>
